/* You can add global styles to this file, and also import other style files */
@use './app/styles/utils';
@use './app/styles/spacing-variables';
@use '@angular/material' as mat;

@import '@angular/material/prebuilt-themes/cyan-orange.css';
@import 'material-symbols/outlined.css';

body {
  margin: 0;
}

html,
body {
  height: 100%;
}

:root {
  --background: hsl(270, 20%, 8%);
  --background-gradient: hsl(280, 25%, 12%);
  --border: hsl(40, 65%, 80%);
  --text: hsl(40, 70%, 85%);
  --button-hover: hsl(280, 25%, 12%);
  --primary-color: #b84949;

  --mat-sys-primary: rgb(168, 58, 58);
  --mat-sys-on-primary: rgb(168, 58, 58);

  font-family: sans-serif;
  scroll-behavior: smooth;

  textarea {
    font-family: sans-serif;
    font-size: 18px;
  }

  // ── Dialog title ─────────────────────────────────────────────
  .dialog-title {
    display: flex !important;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-2);
    font-size: 18px !important;
    font-family: 'Mikadan', sans-serif !important;
    letter-spacing: .06em;
    padding: 14px 18px !important;
    color: #e8c96a !important;
    background:
      linear-gradient(90deg, rgba(8,5,16,.98) 0%, rgba(22,15,38,.98) 50%, rgba(8,5,16,.98) 100%) !important;
    border-bottom: 1px solid rgba(200,160,60,.35) !important;
    text-shadow: 0 0 12px rgba(200,160,60,.4);
    position: relative;

    // bottom gold rule line
    &::after {
      content: '';
      position: absolute;
      bottom: -1px; left: 10%; right: 10%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(200,160,60,.6), transparent);
    }
  }

  .dialog-content {
    padding: 10px !important;
  }

  @include mat.fab-overrides((
    container-color: var(--primary-color),
    container-elevation-shadow: -4px -4px 5px 0px rgba(0, 0, 0, 0.5),
    foreground-color: #eee,
  ));

  @include mat.toolbar-overrides(
    (
      container-background-color: transparent,
      container-text-color: #e0d4c0,
    )
  );

  @include mat.tabs-overrides((
    active-focus-indicator-color: rgb(168, 58, 58),
    active-indicator-height: 5px,
    label-text-font: 'sans-serif',
    label-text-weight: bold
  ));

  @include mat.theme(
    (
      //color: (),
      typography: sans-serif,
      //density: -2,
    ),
    (
      corner-extra-large: var(--border-radius-2),
      corner-extra-large-top: var(--border-radius-2) var(--border-radius-2) 0 0,
      corner-extra-small: var(--border-radius-1),
      corner-extra-small-top: var(--border-radius-1) var(--border-radius-1) 0 0,
      corner-full: var(--border-radius-1),
      corner-large: var(--border-radius-2),
      corner-large-end: 0 var(--border-radius-2) var(--border-radius-2) 0,
      corner-large-start: var(--border-radius-2) 0 0 var(--border-radius-2),
      corner-large-top: var(--border-radius-2) var(--border-radius-2) 0 0,
      corner-medium: var(--border-radius-1),
      corner-none: 0,
      corner-small: var(--border-radius-1),
    )
  );

}

// ════════════════════════════════════════════════════════════════
// SIDENAV CONTENT — flex column so children fill height
// ════════════════════════════════════════════════════════════════
mat-sidenav-content {
  display: flex !important;
  flex-direction: column !important;
}

// ════════════════════════════════════════════════════════════════
// TOOLBAR — D&D dark fantasy style
// ════════════════════════════════════════════════════════════════
mat-toolbar.toolbar {
  background:
    linear-gradient(90deg, rgba(6,4,12,.98) 0%, rgba(16,11,26,.98) 50%, rgba(6,4,12,.98) 100%) !important;
  border-bottom: 1px solid rgba(200,160,60,.3) !important;
  box-shadow: 0 2px 20px rgba(0,0,0,.7), 0 1px 0 rgba(200,160,60,.15) !important;
  color: #e0d4c0 !important;
  position: relative;

  // bottom gold shimmer line
  &::after {
    content: '';
    position: absolute;
    bottom: 0; left: 5%; right: 5%;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(200,160,60,.5), transparent);
    pointer-events: none;
  }
}

// ════════════════════════════════════════════════════════════════
// MAT-DIALOG — D&D dark fantasy style (global, all dialogs)
// ════════════════════════════════════════════════════════════════

// Backdrop
.cdk-overlay-backdrop.cdk-overlay-dark-backdrop {
  background: rgba(4, 2, 10, 0.82) !important;
  backdrop-filter: blur(2px);
}

// Dialog surface
.mat-mdc-dialog-surface {
  background:
    linear-gradient(180deg, rgba(10,7,20,.99) 0%, rgba(16,11,28,.99) 100%) !important;
  border: 1px solid rgba(200,160,60,.3) !important;
  border-radius: 10px !important;
  box-shadow:
    0 0 0 1px rgba(200,160,60,.1),
    0 8px 60px rgba(0,0,0,.9),
    inset 0 1px 0 rgba(255,220,100,.07) !important;
  overflow: hidden !important;

  // Corner gem decorators
  &::before,
  &::after {
    content: '◆';
    position: absolute;
    color: rgba(200,160,60,.5);
    font-size: 9px;
    line-height: 1;
    pointer-events: none;
    z-index: 10;
  }
  &::before { top: 6px; left: 8px; }
  &::after  { top: 6px; right: 8px; }
}

// mat-dialog-content scroll area
mat-dialog-content.dialog-content,
.mat-mdc-dialog-content {
  color: #d4c9b8 !important;
  scrollbar-color: #555 transparent;
}

// Close button inside dialog-title
.dialog-title button[matIconButton],
.dialog-title button[mat-icon-button] {
  color: #8a7a6a !important;
  transition: color .15s, transform .12s !important;

  &:hover {
    color: #e05555 !important;
    transform: scale(1.15) !important;
  }
}

// ════════════════════════════════════════════════════════════════
// TOOLTIP — D&D dark fantasy style
// ════════════════════════════════════════════════════════════════
.mat-mdc-tooltip .mdc-tooltip__surface {
  background:
    linear-gradient(135deg, rgba(12,10,8,.98) 0%, rgba(20,16,12,.98) 100%),
    url('https://www.transparenttextures.com/patterns/dark-leather.png') !important;
  background-color: #0e0b08 !important;
  border: 1px solid rgba(200,160,60,.4) !important;
  border-radius: 5px !important;
  color: #e0d0b0 !important;
  font-size: 11px !important;
  font-family: sans-serif !important;
  letter-spacing: .03em !important;
  padding: 5px 10px !important;
  box-shadow:
    0 0 0 1px rgba(200,160,60,.08),
    0 4px 16px rgba(0,0,0,.8) !important;
}

// ════════════════════════════════════════════════════════════════
// SNACKBAR — D&D dark fantasy style
// ════════════════════════════════════════════════════════════════
.mat-mdc-snack-bar-container {
  --mdc-snackbar-container-color: transparent !important;
  --mdc-snackbar-supporting-text-color: #e0d0b0 !important;

  .mdc-snackbar__surface {
    background:
      linear-gradient(135deg, rgba(12,10,8,.99) 0%, rgba(22,17,12,.99) 100%),
      url('https://www.transparenttextures.com/patterns/dark-leather.png') !important;
    background-color: #0e0b08 !important;
    border: 1px solid rgba(200,160,60,.4) !important;
    border-radius: 8px !important;
    box-shadow:
      0 0 0 1px rgba(200,160,60,.1),
      0 6px 30px rgba(0,0,0,.85),
      inset 0 1px 0 rgba(255,220,100,.05) !important;
    padding: 0 8px !important;

    // gold top shimmer line
    &::before {
      content: '';
      position: absolute;
      top: 0; left: 10%; right: 10%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(200,160,60,.5), transparent);
      pointer-events: none;
    }
  }

  .mat-mdc-snack-bar-label {
    color: #e0d0b0 !important;
    font-size: 13px !important;
    letter-spacing: .03em !important;
  }

  // action button
  .mat-mdc-button.mat-mdc-snack-bar-action {
    color: #c8a03c !important;
    font-family: 'Mikadan', sans-serif !important;
    letter-spacing: .06em !important;

    &:hover { color: #e8c96a !important; }
  }
}

/* scrollbar */
::-webkit-scrollbar {
  height: 14px;
  width: 14px;
}

::-webkit-scrollbar-thumb:horizontal {
  background: #555;
  background-clip: padding-box;

  &:hover {
    background-color: #444;
  }

  &:active {
    background-color: #222;
  }
}

::-webkit-scrollbar-thumb:vertical {
  background: #555;
  background-clip: padding-box;

  &:hover {
    background-color: #444;
  }

  &:active {
    background-color: #222;
  }
}

::-webkit-scrollbar-track {
  background-clip: padding-box;
  background-color: #333;
}